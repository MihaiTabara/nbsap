{% extends 'layout.html' %}
{% block content %}

{% from 'bits.html' import breadcrumb_items -%}
<ul class="breadcrumb">
  {{ breadcrumb_items([
      (url_for('goals.home'), "Home"),
      (url_for('objectives.list_objectives'), "Objectives"),
      (url_for('objectives.view', objective_id=objective.id), "Objective " +
            objective.id|string())

      ]) }}
</ul>

<h3>{{objective.title.en}}</h3>

<div class="btn-toolbar">
    <div class="btn-group">
        <a class="btn btn-primary edit" href="{{url_for('objectives.edit',objective_id=objective.id)}}">Edit</a>
    </div>
</div>
<p>{{objective.body.en|safe}}</p>

{% if objective.subobjs %}
<div class="property_list">
    <table class="table table-bordered table-striped">
        <thead>
            <th>Subobjectives</th>
        </thead>

      <tbody>
        {% for subobj in objective.subobjs %}
          <tr>
            <td>
                <a href="{{url_for('objectives.view_subobj',
                   objective_id=objective.id, subobj_id=subobj.id)}}">{{subobj.title.en}}
                </a>
            </td>
          </tr>
        {% endfor %}
      </tbody>

    </table>
</div>
{% endif %}

{% if actions %}
<div class="property_list">
    <table class="table table-bordered table-striped">
        <thead>
            <th style="width:10px; text-align:center">Id</th>
            <th>Actions</th>
            <th style="width:10px; text-align:center">NL</th>
            <th style="width:10px; text-align:center">FR</th>
        </thead>

      <tbody>
    {% for action in actions|sort(attribute='id') %}
          <tr>
            <td>
                {{-action['id']-}}
            </td>
            <td>
                <a href="{{ url_for('actions.view', objective_id=objective.id,
                                    subobj_id=action.id) }}">
                     {{ action.title.en }}
                </a>
            </td>

            <td style="text-align: center;">
                <a href="{{ url_for('actions.edit', objective_id=objective.id, subobj_id=action.id) }}?lang=nl">
                    <i
                        class="icon-{% if action['body']['nl'] %}ok{% else %}remove{% endif %}">
                    </i>
                </a>
            </td>

            <td style="text-align: center;">
                <a href="{{ url_for('actions.edit', objective_id=objective.id, subobj_id=action.id) }}?lang=fr">
                    <i
                        class="icon-{% if action['body']['fr'] %}ok{% else %}remove{% endif %}">
                    </i>
                </a>
            </td>
          </tr>
        {% endfor %}
      </tbody>

    </table>

</div>
{% endif %}
{% endblock content %}
