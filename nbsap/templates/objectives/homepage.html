{% extends 'layout.html' %}
{% block content %}

{% from "navigation.html" import homepage_tabs %}
{{ homepage_tabs('national') }}

  <h1>Objectives</h1>

  <div class="tabbable tabs-left">

    <ul class="nav nav-tabs">
      {% for objective_id in objective_ids %}
        {% set active = 'active' if objective_id.id == objective.id %}
        <li class={{ active }}>
        <a href="{{ url_for('objectives.homepage_objectives', objective_id=objective_id.id) }}">
          {{ objective_id.id }}
        </a>
        </li>
      {% endfor %}
    </ul>

    <div class="tab-content homepage_view span10" >
      <h2>{{objective.title.en}}</h2>

      <div class="row">
      <ul class="span2 offset1">
        <li><a href="#description">Description</a></li>
        {% for subobj in objective.subobjs|sort(attribute='id') %}
          <li>
          <a href="#subobjective_{{subobj.id}}">Subobjective {{objective.id}}.{{subobj.id}}</a>
          </li>
        {% endfor %}
      </ul>
      </div>

      <div class="element_field" id="description">
        <h3>Description</h3>
        <span>{{objective.body.en|safe}}</span>
        <a href="#top">Back to top</a>
      </div>

      {% for subobj in objective.subobjs|sort(attribute='id') %}
        <div class="element_field" id="subobjective_{{ subobj.id }}">
          <h3>Subobjective {{objective.id}}.{{subobj.id}}</h3>

          <div class="row">
            <div class="span1">Name:</div>
            <div class="span9">{{subobj.title.en }}</div>
          </div>

          <div class="row">
            <div class="span1">Description:</div>
            <div class="span9">{{subobj.body.en|safe }}</div>
          </div>

          {% if subobj.mapping|length() %}
          <div class="row">
            <div class="span2">Mapping with AICHI:</div>
            <ul class="span8">
            {% for m in subobj.mapping %}
                <li>
                  <a href="{{url_for('goals.homepage_goals', goal_short_title=m.goal)}}">
                    goal {{m.goal}}
                  </a>
                  <a href="#">
                    target {{m.main_target}}
                  </a>
                {% for target in m.other_targets %}
                  <a href="#">
                    target {{target}}
                  </a>
                {% endfor %}
                </li>
            {% endfor %}
            </ul>
          </div>
          {% endif %}

          <a href="#top">Back to top</a>
        </div>
      {% endfor %}

    </div>

  </div>

{% endblock content %}
