{% extends 'layout.html' %}
{% block content %}

{% from 'bits.html' import breadcrumb_items -%}
<ul class="breadcrumb">
  {{ breadcrumb_items([
      (url_for('goals.home'), "Home"),
      (url_for('objectives.list_objectives'), "Objectives"),
      (url_for('objectives.view', objective_id=objective.id), "Objective " +
            objective.id|string())

      ]) }}
</ul>
<div class="row">
    <div class="span6">
        <form class="form-horizontal objective-edit"
              method="POST"
              action="{{url_for('objectives.edit', objective_id=objective.id)}}">

                {{mk.widget(schema)}}

            <div class="form-actions">
                <button type="submit" class="btn btn-primary">Save</button>
                <a href="{{url_for('objectives.view', objective_id=objective.id)}}"
                        class="btn" type="button">Cancel</a>
            </div>
        </form>
    </div>
    <div class="span6 container-right">
        <span class="well input-xlarge disabled span4 original-title">
            {{objective.title['en']}}
        </span>
        <textarea class="well input-xlarge edit-textarea original-body" disabled="disabled">
            {{objective.body['en']}}
        </textarea>
    </div>
</div>
{% endblock content %}

{% block scripts %}
{{ super() }}
{% from 'bits.html' import script_src -%}
{{ script_src('js/jquery.js') }}

<script>
    $(document).ready(function (){
        $('.fr').hide();
        $('.nl').hide();
        $('#field-fr').hide();
        $('#field-nl').hide();
    });

    $('.language-select').on('change', function () {
        var lang = $(this).val();
        var languages = ['en', 'fr', 'nl'];
        for(i in languages) {
            if(languages[i] != lang) {
                $('.' + languages[i]).hide();
                $('#field-' + languages[i]).hide();
            }
        }

        $('.' + lang).show();
        $('#field-' + lang).show();

        if (lang == 'en')
            $('.container-right').hide();
        else
            $('.container-right').show();
    }).change();

</script>
{% endblock %}
